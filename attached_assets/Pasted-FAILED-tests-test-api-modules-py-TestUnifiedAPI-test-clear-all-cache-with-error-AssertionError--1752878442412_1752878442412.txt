FAILED tests/test_api_modules.py::TestUnifiedAPI::test_clear_all_cache_with_error - AssertionError: Expected 'clear_cache' to have been called once. Cal...
FAILED tests/test_storage.py::TestJSONSaver::test_init - AttributeError: 'JSONSaver' object has no attribute 'file_path'
FAILED tests/test_storage.py::TestJSONSaver::test_save_and_load_basic - AttributeError: 'JSONSaver' object has no attribute 'save_vacancies'
FAILED tests/test_storage.py::TestJSONSaver::test_save_permission_error - AttributeError: 'JSONSaver' object has no attribute 'save_vacancies'
FAILED tests/test_storage.py::TestJSONSaver::test_file_creation - AttributeError: 'JSONSaver' object has no attribute 'save_vacancies'
FAILED tests/test_vacancies.py::TestVacancy::test_from_dict - AssertionError: assert '3a9b1572-7d7...-c43ff553b0e7' == '1'
FAILED tests/test_vacancies.py::TestVacancy::test_to_dict - KeyError: 'vacancy_id'
FAILED tests/test_vacancies.py::TestVacancy::test_str_representation - AssertionError: assert '100 000' in 'Должность: Python Developer\nКо...
FAILED tests/test_vacancies.py::TestSuperJobParser::test_parse_vacancies - AttributeError: 'SuperJobVacancy' object has no attribute 'profession'
FAILED tests/test_vacancies.py::TestSuperJobParser::test_convert_to_unified_format - TypeError: __init__() got an unexpected keyword argument 'id'
FAILED tests/test_vacancies.py::TestSuperJobVacancy::test_init - TypeError: __init__() got an unexpected keyword argument 'id'
FAILED tests/test_vacancies.py::TestSuperJobVacancy::test_str_representation - TypeError: __init__() got an unexpected keyword argument 'id'
FAILED tests/test_vacancies.py::TestSuperJobVacancy::test_salary_property - TypeError: __init__() got an unexpected keyword argument 'id'
ERROR tests/test_vacancies.py::TestHeadHunterParser::test_parse_vacancy - NameError: name 'HeadHunterParser' is not defined
ERROR tests/test_vacancies.py::TestHeadHunterParser::test_parse_salary - NameError: name 'HeadHunterParser' is not defined
ERROR tests/test_vacancies.py::TestHeadHunterParser::test_parse_salary_none - NameError: name 'HeadHunterParser' is not defined
========= 13 failed, 124 passed, 1 warning, 3 errors in 11.76s ==========
~/workspace$ pytest tests/test_api_modules.py 
========================== test session starts ==========================
platform linux -- Python 3.9.6, pytest-8.4.1, pluggy-1.6.0
rootdir: /home/runner/workspace
configfile: pyproject.toml
plugins: mock-3.14.1, cov-6.2.1
collected 69 items                                                      

tests/test_api_modules.py ....................................... [ 56%]
...................F..........                                    [100%]

=============================== FAILURES ================================
____________ TestUnifiedAPI.test_clear_all_cache_with_error _____________

self = <MagicMock name='clear_cache' id='139654798400720'>

    def assert_called_once(self):
        """assert that the mock was called only once.
        """
        if not self.call_count == 1:
            msg = ("Expected '%s' to have been called once. Called %s times.%s"
                   % (self._mock_name or 'mock',
                      self.call_count,
                      self._calls_repr()))
>           raise AssertionError(msg)
E           AssertionError: Expected 'clear_cache' to have been called once. Called 0 times.

/nix/store/nki9ywqzbvz68vr75kn2r7g1q84f5agy-python3-3.9.6/lib/python3.9/unittest/mock.py:886: AssertionError

During handling of the above exception, another exception occurred:

self = <tests.test_api_modules.TestUnifiedAPI object at 0x7f03eabd6ca0>
unified_api = <src.api_modules.unified_api.UnifiedAPI object at 0x7f03ea1fdc40>

    def test_clear_all_cache_with_error(self, unified_api):
        # Тестируем ошибку при очистке всего кэша (строки 128-129)
        with patch.object(unified_api.hh_api, 'clear_cache', side_effect=Exception("HH clear error")):
            with patch.object(unified_api.sj_api, 'clear_cache') as mock_sj_clear:
                unified_api.clear_all_cache()
                # Проверяем что несмотря на ошибку HH, метод продолжает работу
>               mock_sj_clear.assert_called_once()
E               AssertionError: Expected 'clear_cache' to have been called once. Called 0 times.

tests/test_api_modules.py:586: AssertionError
--------------------------- Captured log call ---------------------------
ERROR    src.api_modules.unified_api:unified_api.py:129 Ошибка очистки кэша: HH clear error
======================== short test summary info ========================
FAILED tests/test_api_modules.py::TestUnifiedAPI::test_clear_all_cache_with_error - AssertionError: Expected 'clear_cache' to have been called once. Cal..