~/workspace$ pytest tests/test_api_modules.py -v
========================== test session starts ==========================
platform linux -- Python 3.9.6, pytest-8.4.1, pluggy-1.6.0 -- /nix/store/nki9ywqzbvz68vr75kn2r7g1q84f5agy-python3-3.9.6/bin/python3.9
cachedir: .pytest_cache
rootdir: /home/runner/workspace
configfile: pyproject.toml
plugins: mock-3.14.1, cov-6.2.1
collected 11 items                                                      

tests/test_api_modules.py::TestHeadHunterAPI::test_init PASSED    [  9%]
tests/test_api_modules.py::TestHeadHunterAPI::test_validate_vacancy_valid PASSED [ 18%]
tests/test_api_modules.py::TestHeadHunterAPI::test_validate_vacancy_invalid PASSED [ 27%]
tests/test_api_modules.py::TestHeadHunterAPI::test_get_vacancies_page PASSED [ 36%]
tests/test_api_modules.py::TestHeadHunterAPI::test_get_vacancies_empty_response PASSED [ 45%]
tests/test_api_modules.py::TestHeadHunterAPI::test_get_vacancies_full PASSED [ 54%]
tests/test_api_modules.py::TestSuperJobAPI::test_init PASSED      [ 63%]
tests/test_api_modules.py::TestSuperJobAPI::test_get_vacancies_page FAILED [ 72%]
tests/test_api_modules.py::TestUnifiedAPI::test_init FAILED       [ 81%]
tests/test_api_modules.py::TestUnifiedAPI::test_search_vacancies_hh_only FAILED [ 90%]
tests/test_api_modules.py::TestUnifiedAPI::test_search_vacancies_both_sources FAILED [100%]

=============================== FAILURES ================================
________________ TestSuperJobAPI.test_get_vacancies_page ________________

self = <tests.test_api_modules.TestSuperJobAPI object at 0x7fd4c22ca400>
mock_connect = <MagicMock name='_CachedAPI__connect_to_api' id='140551767462192'>
sj_api = <src.api_modules.sj_api.SuperJobAPI object at 0x7fd4c22d0b80>
mock_sj_response = {'objects': [{'candidat': 'Знание Python', 'currency': 'rub', 'experience': {'title': 'От 3 до 6 лет'}, 'firm_name': 'Tech Company', ...}], 'total': 1}

    @patch('src.api_modules.cached_api.CachedAPI._CachedAPI__connect_to_api')
    def test_get_vacancies_page(self, mock_connect, sj_api, mock_sj_response):
        """Тест получения страницы вакансий SJ"""
        mock_connect.return_value = mock_sj_response
    
        result = sj_api.get_vacancies_page("python", page=0)
    
>       assert len(result) == 1
E       assert 0 == 1
E        +  where 0 = len([])

tests/test_api_modules.py:99: AssertionError
------------------------- Captured stderr call --------------------------
ERROR:src.api_modules.sj_api:Failed to get vacancies page 0: 'APIConfig' object has no attribute 'get_params'
--------------------------- Captured log call ---------------------------
ERROR    src.api_modules.sj_api:sj_api.py:84 Failed to get vacancies page 0: 'APIConfig' object has no attribute 'get_params'
_______________________ TestUnifiedAPI.test_init ________________________

self = <tests.test_api_modules.TestUnifiedAPI object at 0x7fd4c22e75b0>
mock_sj = <MagicMock name='SuperJobAPI' id='140551767510368'>
mock_hh = <MagicMock name='HeadHunterAPI' id='140551767329952'>
api_config = <src.config.api_config.APIConfig object at 0x7fd4c22ccc70>

    @patch('src.api_modules.hh_api.HeadHunterAPI')
    @patch('src.api_modules.sj_api.SuperJobAPI')
    def test_init(self, mock_sj, mock_hh, api_config):
        """Тест инициализации унифицированного API"""
>       unified_api = UnifiedAPI(api_config)
E       TypeError: __init__() takes 1 positional argument but 2 were given

tests/test_api_modules.py:110: TypeError
_____________ TestUnifiedAPI.test_search_vacancies_hh_only ______________

self = <tests.test_api_modules.TestUnifiedAPI object at 0x7fd4c22d0cd0>
mock_sj = <MagicMock name='SuperJobAPI' id='140551767029504'>
mock_hh = <MagicMock name='HeadHunterAPI' id='140551767106656'>
api_config = <src.config.api_config.APIConfig object at 0x7fd4c2257880>

    @patch('src.api_modules.hh_api.HeadHunterAPI')
    @patch('src.api_modules.sj_api.SuperJobAPI')
    def test_search_vacancies_hh_only(self, mock_sj, mock_hh, api_config):
        """Тест поиска только через HH"""
        mock_hh_instance = MagicMock()
        mock_hh_instance.get_vacancies.return_value = [{'name': 'Test'}]
        mock_hh.return_value = mock_hh_instance
    
>       unified_api = UnifiedAPI(api_config)
E       TypeError: __init__() takes 1 positional argument but 2 were given

tests/test_api_modules.py:124: TypeError
___________ TestUnifiedAPI.test_search_vacancies_both_sources ___________

self = <tests.test_api_modules.TestUnifiedAPI object at 0x7fd4c22d0490>
mock_sj = <MagicMock name='SuperJobAPI' id='140551767006224'>
mock_hh = <MagicMock name='HeadHunterAPI' id='140551767150112'>
api_config = <src.config.api_config.APIConfig object at 0x7fd4c2251d00>

    @patch('src.api_modules.hh_api.HeadHunterAPI')
    @patch('src.api_modules.sj_api.SuperJobAPI')
    def test_search_vacancies_both_sources(self, mock_sj, mock_hh, api_config):
        """Тест поиска через оба источника"""
        mock_hh_instance = MagicMock()
        mock_hh_instance.get_vacancies.return_value = [{'name': 'HH Test'}]
        mock_hh.return_value = mock_hh_instance
    
        mock_sj_instance = MagicMock()
        mock_sj_instance.get_vacancies.return_value = [{'profession': 'SJ Test'}]
        mock_sj.return_value = mock_sj_instance
    
>       unified_api = UnifiedAPI(api_config)
E       TypeError: __init__() takes 1 positional argument but 2 were given

tests/test_api_modules.py:142: TypeError
======================== short test summary info ========================
FAILED tests/test_api_modules.py::TestSuperJobAPI::test_get_vacancies_page - assert 0 == 1
FAILED tests/test_api_modules.py::TestUnifiedAPI::test_init - TypeError: __init__() takes 1 positional argument but 2 were given
FAILED tests/test_api_modules.py::TestUnifiedAPI::test_search_vacancies_hh_only - TypeError: __init__() takes 1 positional argument but 2 were given
FAILED tests/test_api_modules.py::TestUnifiedAPI::test_search_vacancies_both_sources - TypeError: __init__() takes 1 positional argument but 2 were given
====================== 4 failed, 7 passed in 0.13s ======================
~/workspace$ 